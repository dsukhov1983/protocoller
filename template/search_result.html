{% extends "base_generic.html" %}

{% load pytils_dt %}
{% load pretty_print %}

{% block content %}

<form action="/search" method="get" id="search" name="search">
<input id="query" class="emptySearch" placeholder="Найти спортсмена в протоколах" maxlength="80" value="{{ query }}" name="query" type="text" /> 
 <script type="text/javascript">
   $(document).ready(function(){ 
   $('#query').placeholder();
   });    
 </script>
<div class="sampleSearch">
Например, <span class="pseudolink"
                onclick="$('#query').focus().val('{{ sample_search }}')">
    {{ sample_search }}
</span>
</div>
</form>

{% if persons.object_list %}
Результаты поиска:
<div class="search_results">
  {% for p in persons.object_list %}
  <div class="person">
    <a href="{% url person_results p.id %}">
      <span class="title">{{ p.full_name }} {{ p.get_rank_display }} 
        {{ p.year }} </span> {{ p.city|default:"" }} {{ p.club|default:"" }}
    </a>
  </div>
  {% endfor %}  
</div>

{% ifnotequal persons.paginator.num_pages 1 %}

<div class="pager">
  <span class="step-links">
        {% if persons.has_previous %}        
        <a href="?query={{ query }}&page={{ persons.previous_page_number }}">предыдущая</a>
        {% else %}
            <span>предыдущая</span>
        {% endif %}        

        {% if persons.has_next %}
            <a href="?query={{ query }}&page={{ persons.next_page_number }}">
              следующая</a>
        {% else %}
            <span>следующая</span>
        {% endif %}
        <div>
        {% for p in persons.paginator.page_range %}
            {% ifequal persons.number p %}
            <b>{{ p }}</b>
            {% else %}
            <a href="?query={{ query }}&page={{ p }}">{{ p }}</a>
            {% endifequal %}
        {% endfor %}
        </div>
    </span>
</div>
{% endifnotequal %}
{% else %}
 {% if query %}
 Ничего не найдено.
 {% endif %}
{% endif %}

{% endblock %}


{% block right %}
<div class="hint">
Здесь можно найти информацию о спортсмене по его имени и фамилии.
</div>
{% endblock %}
