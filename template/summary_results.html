{% extends "base_generic.html" %}

{% load pytils_dt %}
{% load pretty_print %}

{% block content %}
<div class="person">
<p>Фамилия Имя: {{ person.full_name }}</p>
<p>Год рождения: {{ person.year }}</p>
<p>Звание: {{ person.get_rank_display }}</p>
<p>Город: {{ person.city }}</p>
<p>Клуб: {{ person.club }}</p>
</div>

<table class="protocol">
  {% for season, results in res_groups %}

  <tr><th colspan="10" class="group">{{ season }}</th></tr>

  <tr class="head">
    <th>Дата</th>
    <th>Место</th>
    <th>Соревнование</th>
    <th>М(абс)</th>
    <th>М(грп)</th>
    <th>Группа</th>    
    <th>Рез-тат</th>
    <th>Отставание</th>
  </tr>  


  {% for r in results %}
  <tr class="{% cycle odd,even %}">
    <td>{{ r.competition.event.date|ru_strftime:"%d %B"}}</td>
    <td>{{ r.competition.event.place|default:"" }}</td>
    <td>
      <a href="{% url protocoller.miner.views.protocol r.competition.id %}" >{{ r.competition.event }} {{ r.competition }}</a>      
    </td>
    <td>{% print_pos r %}</td>
    <td>{% print_grp_pos r %}</td>    
    <td>{{ r.group|default:"" }}</td>
    <td>{% print_time r %}</td>
    <td>{% time_diff r.time r.competition.best_result %}</td>
  </tr>
  {% endfor %}
  {% endfor %}
  
</table>

{% endblock %}


{% block right %}
<div class="hint">
Если Вы заметили неточность в данных на сайте, то можете 
<a href="{% url feedback_person person.id %}">сообщить</a> нам об этом.
</div>
{% endblock %}
